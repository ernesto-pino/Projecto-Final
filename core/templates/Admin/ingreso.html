{% extends "admin/base.html" %}
{% load static %}

{% block bodyclass %}login-page{% endblock %}
{% block title %}Ingresar{% endblock %}

{# Desactiva dark mode si lo necesitabas #}
{% block dark-mode-vars %}{% endblock %}

{% block messages %}{% endblock %}

{% block errors %}{% endblock %}

{% block extrahead %}{{ block.super }}
<meta name="color-scheme" content="light">
{% endblock %}

{% block extrastyle %}{{ block.super }}
<link rel="stylesheet" href="{% static 'core/css/admin.css' %}?v=3">
<link rel="icon" type="image/png" href="{% static 'core/img/logo_lampa.png' %}">
{% endblock %}

{% block content %}
<div class="login-wrap">
  <form method="post" action="{% url 'login' %}" class="login-card">
    {% csrf_token %}

    <div class="login-logo">
      <img src="{% static 'core/img/logo_lampa.png' %}" alt="Logo COSAM">
    </div>

    <h1 class="login-title">Ingresar</h1>
    <p class="login-subtitle">Accede con tu usuario y contraseña institucional.</p>

    <div class="login-errors">
      {% if form.errors %}
        {# Errores por campo #}
        {% for field in form %}
          {% for err in field.errors %}
            <div class="login-alert">{{ err }}</div>
          {% endfor %}
        {% endfor %}
        {# Errores no asociados a campo (credenciales inválidas, etc.) #}
        {% for err in form.non_field_errors %}
          <div class="login-alert">{{ err }}</div>
        {% endfor %}
      {% endif %}
    </div>

    <div class="login-field">
      <label for="{{ form.username.id_for_label }}" class="login-label">Usuario</label>
      {{ form.username }}
    </div>

    <div class="login-field">
      <label for="{{ form.password.id_for_label }}" class="login-label">Contraseña</label>
      {{ form.password }}
    </div>

    <input type="hidden" name="next" value="{% url 'dispatch_por_rol' %}">

    <button type="submit" class="login-btn">Entrar</button>
    <p class="login-links">
      <a href="{% url 'password_reset' %}">¿Olvidaste tu contraseña?</a>
    </p>
  </form>
</div>
{% endblock %}
